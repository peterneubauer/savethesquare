<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save The Square - Rädda Visne Ängar</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <section class="hero">
            <div class="hero-image-overlay"></div>
            <div class="container hero-container">
                <div class="hero-content">
                    <h1 class="hero-title">SAVE THE SQUARE</h1>
                    <p class="hero-subtitle">Rädda Visne Ängar - En kvadratmeter i taget</p>
                    <p class="hero-description">Visne Ängar på Gotland är ett unikt naturområde som behöver skyddas.
                    För endast <strong>20 SEK</strong> kan du "adoptera" en kvadratmeter och bidra till bevarandet.</p>
                    <a href="#map-section" class="hero-cta">Välj din kvadratmeter</a>
                </div>
            </div>
        </section>

        <section class="stats-section">
            <div class="container">
                <div class="stats">
                    <div class="stat">
                        <span class="stat-number" id="donated-squares">0</span>
                        <span class="stat-label">kvadratmeter räddade</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="total-raised">0</span>
                        <span class="stat-label">SEK insamlat</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">450,000</span>
                        <span class="stat-label">totala kvadratmeter</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="map-section" id="map-section">
            <div class="container">
                <h2 class="section-title">Välj din kvadratmeter</h2>
                <p class="section-subtitle">Klicka på kartan nedan för att välja och donera din kvadratmeter av Visne Ängar</p>
                <p class="map-instructions">
                    <span class="legend-item"><span class="legend-box available"></span> Tillgänglig</span>
                    <span class="legend-item"><span class="legend-box donated"></span> Donerad</span>
                    <span class="legend-item"><span class="legend-box selected"></span> Vald</span>
                    <br>
                    <small style="color: #666; margin-top: 0.5rem; display: inline-block;">
                        Använd zoom-kontrollerna (+/-) för att zooma. Håll Shift och dra för att panorera.
                    </small>
                </p>

                <div id="map-container">
                    <div id="donation-map-leaflet"></div>
                </div>

                <div class="selection-controls">
                    <button id="donate-btn" class="btn-primary" disabled>
                        Donera <span id="selected-count">0</span> kvadratmeter (<span id="total-amount">0</span> SEK)
                    </button>
                    <button id="clear-selection-btn" class="btn-secondary" disabled>Rensa val</button>
                </div>
            </div>
        </section>

        <section class="nature-showcase">
            <div class="container">
                <h2 class="section-title">Visne Ängar - Ett Levande Naturarv</h2>
                <p class="section-subtitle">Upptäck skönheten i det område vi tillsammans bevarar för kommande generationer</p>

                <div class="gallery-grid">
                    <div class="gallery-item gallery-item-large">
                        <img src="media/20230917_101507.jpg" alt="Visne Ängar naturområde" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Öppna ängsmarker med rik biologisk mångfald</p>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="media/IMG_1498.jpg" alt="Gotlands natur" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Natursköna landskap året runt</p>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="media/IMG_1516.jpg" alt="Visne Ängar flora" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Hemvist för ovanliga växtarter</p>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="media/PXL_20241013_132524949.jpg" alt="Naturreservat Gotland" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Ett unikt naturområde värt att bevara</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="about">
            <div class="container">
                <div class="about-content">
                    <div class="about-text">
                        <h2 class="section-title-left">Om Projektet</h2>
                        <p class="lead-text">Visne Ängar är ett naturområde på östra Gotland.
                        Området är hem för otaliga växt- och djurarter och utgör en viktig del av öns biologiska mångfald.</p>

                        <p>Genom att "adoptera" en eller flera kvadratmeter bidrar du direkt till skötsel och bevarande
                        av detta unika område. Varje donation går till markförvaltning, naturvård och långsiktigt skydd.</p>

                        <div class="how-it-works">
                            <h3>Så fungerar det</h3>
                            <div class="steps-grid">
                                <div class="step">
                                    <div class="step-number">1</div>
                                    <h4>Välj dina kvadratmeter</h4>
                                    <p>Klicka på en eller flera lediga kvadratmeter på den interaktiva kartan</p>
                                </div>
                                <div class="step">
                                    <div class="step-number">2</div>
                                    <h4>Fyll i dina uppgifter</h4>
                                    <p>Ditt namn kommer visas på din kvadratmeter på kartan</p>
                                </div>
                                <div class="step">
                                    <div class="step-number">3</div>
                                    <h4>Slutför donationen</h4>
                                    <p>Betala säkert via Stripe (20 SEK per kvadratmeter)</p>
                                </div>
                                <div class="step">
                                    <div class="step-number">4</div>
                                    <h4>Markera som räddad</h4>
                                    <p>Din kvadratmeter markeras och du får en bekräftelse med karta</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="about-image">
                        <div id="location-map"></div>
                        <div class="location-caption">
                            <strong>Visne Ängar, Gotland</strong>
                            <p>Naturreservat på östra kusten</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Save The Square | Projekt för bevarande av Visne Ängar, Gotland</p>
        </div>
    </footer>

    <!-- Donation Modal -->
    <div id="donation-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Slutför din donation</h2>
            <p>Du har valt <strong><span id="modal-square-count">0</span></strong> kvadratmeter</p>
            <p class="modal-total">Totalt: <strong><span id="modal-total">0</span> SEK</strong></p>

            <form id="donation-form">
                <div class="form-group">
                    <label for="donor-name">Ditt namn (visas på kartan):</label>
                    <input type="text" id="donor-name" name="donor-name" required maxlength="50"
                           placeholder="T.ex. Anna Svensson">
                </div>

                <div class="form-group">
                    <label for="donor-email">E-post (för kvitto):</label>
                    <input type="email" id="donor-email" name="donor-email" required
                           placeholder="din@email.se">
                </div>

                <div class="form-group">
                    <label for="donor-greeting">Hälsning (valfritt, visas i bekräftelsemail):</label>
                    <textarea id="donor-greeting" name="donor-greeting" rows="3" maxlength="250"
                              placeholder="T.ex. 'Med hopp om en grönare framtid för kommande generationer.'"></textarea>
                </div>

                <button type="submit" class="btn-primary btn-large">
                    Betala med Stripe
                </button>
            </form>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="config.js"></script>
    <script src="app-simplified.js"></script>
</body>
</html>
